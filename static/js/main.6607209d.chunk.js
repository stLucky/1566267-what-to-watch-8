(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var r,c,n,i,s=a(1),o=a.n(s),l=a(23),d=a.n(l),u=a(2),j=a(3),m=a(50),b=a.n(m),O="All genres",h=100,f=404,v="OTHER",x="Oops... Something went wrong. Try another time",p="Oops... Something went wrong. Try again";!function(e){e.Login="/login",e.MyList="/mylist",e.Film="/films/:id",e.AddReview="/films/:id/review",e.Player="/player/:id",e.Root="/"}(r||(r={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(c||(c={})),function(e){e.Films="/films",e.Promo="/promo",e.Favorite="/favorite",e.Reviews="/comments",e.Login="/login",e.Logout="/logout"}(n||(n={})),function(e){e[e.On=1]="On",e[e.Off=0]="Off"}(i||(i={}));var _,g,N="user-token",w=function(e){localStorage.setItem(N,e)};(g=_||(_={}))[g.Unauthorized=401]="Unauthorized",g[g.NotFound=f]="NotFound";var y,L=a(15),S=a(17);!function(e){e.ChangeActiveGenre="films/changeGenre",e.IncrementLimit="films/incrementLimit",e.ResetLimit="films/resetLimit",e.LoadFilmsRequest="data/loadFilmsRequest",e.LoadFilmsSuccess="data/loadFilmsSuccess",e.LoadFilmsError="data/loadFilmsError",e.LoadFilmRequest="data/loadFilmRequest",e.LoadFilmSuccess="data/loadFilmSuccess",e.LoadFilmError="data/loadFilmError",e.LoadPromoRequest="data/loadPromoRequest",e.LoadPromoSuccess="data/loadPromoSuccess",e.LoadPromoError="data/loadPromoError",e.LoadSimilarRequest="data/loadSimilarRequest",e.LoadSimilarSuccess="data/loadSimilarSuccess",e.LoadSimilarError="data/loadSimilarError",e.LoadReviewsRequest="data/loadReviewsRequest",e.LoadReviewsSuccess="data/loadReviewsSuccess",e.LoadReviewsError="data/loadReviewsError",e.SendReviewRequest="data/sendReviewRequest",e.requireAuthorization="user/requireAuthorization",e.requireLogout="user/requireLogout",e.AuthorizationRequest="data/authorizationRequest",e.RedirectToRoute="route/redirectToRoute",e.LoadUser="data/loadUser",e.ChangeFavoriteStatus="data/changeFavoriteStatus",e.LoadMyListRequest="data/loadMyListRequest",e.LoadMyListSuccess="data/loadMyListSuccess",e.LoadMyListError="data/loadMyListError",e.CheckAuthRequest="data/checkAuthRequest"}(y||(y={}));var F,R,k=Object(j.b)(y.ChangeActiveGenre),C=Object(j.b)(y.LoadFilmsRequest),E=Object(j.b)(y.LoadFilmsSuccess),M=Object(j.b)(y.LoadFilmsError),A=Object(j.b)(y.LoadFilmRequest),P=Object(j.b)(y.LoadFilmSuccess),T=Object(j.b)(y.LoadFilmError),q=Object(j.b)(y.LoadPromoRequest),W=Object(j.b)(y.LoadPromoSuccess),U=Object(j.b)(y.LoadPromoError),I=Object(j.b)(y.LoadSimilarRequest),D=Object(j.b)(y.LoadSimilarSuccess),z=Object(j.b)(y.LoadSimilarError),B=Object(j.b)(y.LoadReviewsRequest),G=Object(j.b)(y.LoadReviewsSuccess),H=Object(j.b)(y.LoadReviewsError),V=Object(j.b)(y.SendReviewRequest),X=Object(j.b)(y.IncrementLimit),K=Object(j.b)(y.ResetLimit),Y=Object(j.b)(y.requireAuthorization),J=Object(j.b)(y.AuthorizationRequest),Z=Object(j.b)(y.CheckAuthRequest),Q=Object(j.b)(y.requireLogout),$=Object(j.b)(y.RedirectToRoute),ee=Object(j.b)(y.LoadUser),te=Object(j.b)(y.ChangeFavoriteStatus),ae=Object(j.b)(y.LoadMyListRequest),re=Object(j.b)(y.LoadMyListSuccess),ce=Object(j.b)(y.LoadMyListError),ne=Object(j.c)({films:[],isFilmsLoading:!1,isFilmsError:!1},(function(e){e.addCase(C,(function(e,t){e.isFilmsLoading=t.payload})).addCase(E,(function(e,t){e.films=t.payload})).addCase(M,(function(e){e.isFilmsError=!0}))})),ie={activeGenre:O,limit:8},se=Object(j.c)(ie,(function(e){e.addCase(k,(function(e,t){e.activeGenre=t.payload})).addCase(X,(function(e,t){e.limit=e.limit+t.payload})).addCase(K,(function(e){e.limit=ie.limit}))})),oe=Object(j.c)({reviews:[],isReviewsLoading:!1,isReviewsError:!1,isSendReviewLoading:!1},(function(e){e.addCase(B,(function(e,t){e.isReviewsLoading=t.payload})).addCase(G,(function(e,t){e.reviews=t.payload})).addCase(H,(function(e,t){e.isReviewsError=t.payload})).addCase(V,(function(e,t){e.isSendReviewLoading=t.payload}))})),le={user:{},authorizationStatus:c.Unknown,isAuthLoading:!1,isCheckAuthLoading:!1},de=Object(j.c)(le,(function(e){e.addCase(ee,(function(e,t){e.user=t.payload})).addCase(Y,(function(e,t){e.authorizationStatus=t.payload})).addCase(Q,(function(e){e.authorizationStatus=c.NoAuth})).addCase(J,(function(e,t){e.isAuthLoading=t.payload})).addCase(Z,(function(e,t){e.isCheckAuthLoading=t.payload}))})),ue=Object(j.c)({myList:[],isMyListLoading:!1,isMyListError:!1},(function(e){e.addCase(ae,(function(e,t){e.isMyListLoading=t.payload})).addCase(re,(function(e,t){e.myList=t.payload})).addCase(ce,(function(e,t){e.isMyListError=t.payload}))})),je=a(21),me=Object(j.c)({film:{},isFilmLoading:!1,filmError:""},(function(e){e.addCase(A,(function(e,t){e.isFilmLoading=t.payload})).addCase(P,(function(e,t){e.film=t.payload})).addCase(T,(function(e,t){e.filmError=t.payload})).addCase(te,(function(e,t){var a=t.payload,r=a.id,c=a.isFavorite;e.film.id===r&&(e.film=Object(je.a)(Object(je.a)({},e.film),{},{isFavorite:c}))}))})),be=Object(j.c)({promo:{},isPromoLoading:!1,isPromoError:!1},(function(e){e.addCase(q,(function(e,t){e.isPromoLoading=t.payload})).addCase(W,(function(e,t){e.promo=t.payload})).addCase(U,(function(e,t){e.isPromoError=t.payload})).addCase(te,(function(e,t){var a=t.payload,r=a.id,c=a.isFavorite;e.promo.id===r&&(e.promo=Object(je.a)(Object(je.a)({},e.promo),{},{isFavorite:c}))}))})),Oe=Object(j.c)({similar:[],isSimilarLoading:!1,isSimilarError:!1},(function(e){e.addCase(I,(function(e,t){e.isSimilarLoading=t.payload})).addCase(D,(function(e,t){e.similar=t.payload})).addCase(z,(function(e,t){e.isSimilarError=t.payload}))}));!function(e){e.Films="FILMS",e.Film="FILM",e.Promo="PROMO",e.SimilarFilms="SIMILAR_FILMS",e.Favorites="FAVORITES",e.Reviews="REVIEWS",e.App="APP",e.User="USER"}(R||(R={}));var he=Object(S.c)((F={},Object(L.a)(F,R.Films,ne),Object(L.a)(F,R.Film,me),Object(L.a)(F,R.Promo,be),Object(L.a)(F,R.SimilarFilms,Oe),Object(L.a)(F,R.Favorites,ue),Object(L.a)(F,R.Reviews,oe),Object(L.a)(F,R.App,se),Object(L.a)(F,R.User,de),F)),fe=function(e){return e[R.Promo].promo},ve=function(e){return e[R.Promo].isPromoLoading},xe=function(e){return e[R.Promo].isPromoError},pe=a(7),_e=a(8),ge=a(5),Ne=a.n(ge),we=a(12),ye=a(13),Le=a.n(ye),Se=a(18),Fe=function(e,t){return function(){var a=Object(we.a)(Ne.a.mark((function a(r,c,i){var s,o,l;return Ne.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.post("".concat(n.Favorite,"/").concat(e,"/").concat(t));case 3:s=a.sent,o=s.data,l=Le()(o),r(te(l)),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),401===a.t0?Se.b.error("Login required!"):Se.b.error(p);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t,r){return a.apply(this,arguments)}}()},Re=function(e){return e[R.Film].film},ke=function(e){return e[R.Film].isFilmLoading},Ce=function(e){return e[R.Film].filmError},Ee=function(e){return e[R.User].user},Me=function(e){return e[R.User].authorizationStatus},Ae=function(e){return e[R.User].isAuthLoading},Pe=function(e){return e[R.User].isCheckAuthLoading},Te=a(0);function qe(e){var t,a=e.hasReviewControl,r=void 0!==a&&a,n=Object(u.c)(Me),s=Object(u.c)(fe),o=Object(u.c)(Re),l=Object(pe.i)().id,d=l||(null===(t=s.id)||void 0===t?void 0:t.toString()),j=l?o.isFavorite:s.isFavorite,m=Object(u.b)(),b=Object(pe.g)(),O=r&&n===c.Auth;return Object(Te.jsxs)("div",{className:"film-card__buttons",children:[Object(Te.jsxs)("button",{className:"btn btn--play film-card__button",type:"button",onClick:function(e){e.preventDefault(),b.push("/player/".concat(d))},children:[Object(Te.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(Te.jsx)("use",{xlinkHref:"#play-s"})}),Object(Te.jsx)("span",{children:"Play"})]}),Object(Te.jsxs)("button",{className:"btn btn--list film-card__button",type:"button",onClick:function(e){e.preventDefault(),m(Fe(d,j?i.Off:i.On))},children:[j?Object(Te.jsx)("svg",{viewBox:"0 0 18 14",width:"18",height:"14",children:Object(Te.jsx)("use",{xlinkHref:"#in-list","data-testid":"in-list"})}):Object(Te.jsx)("svg",{viewBox:"0 0 19 20",width:"19",height:"20",children:Object(Te.jsx)("use",{xlinkHref:"#add","data-testid":"add"})}),Object(Te.jsx)("span",{children:"My list"})]}),O&&Object(Te.jsx)(_e.a,{to:"/films/".concat(l,"/review"),className:"btn film-card__button",children:"Add review"})]})}var We=Object(s.memo)(qe);var Ue=function(e){var t=e.children,a=Object(u.c)(fe);return Object(u.c)(xe)?Object(Te.jsxs)("section",{className:"film-card",children:[Object(Te.jsx)("div",{className:"film-card__bg"}),Object(Te.jsx)("h1",{className:"visually-hidden",children:"WTW"}),t]}):Object(Te.jsxs)("section",{className:"film-card",children:[Object(Te.jsx)("div",{className:"film-card__bg",children:Object(Te.jsx)("img",{src:a.backgroundImage,alt:a.name})}),Object(Te.jsx)("h1",{className:"visually-hidden",children:"WTW"}),t,Object(Te.jsx)("div",{className:"film-card__wrap",children:Object(Te.jsxs)("div",{className:"film-card__info",children:[Object(Te.jsx)("div",{className:"film-card__poster",children:Object(Te.jsx)("img",{src:a.posterImage,alt:a.name,width:"218",height:"327"})}),Object(Te.jsxs)("div",{className:"film-card__desc",children:[Object(Te.jsx)("h2",{className:"film-card__title",children:a.name}),Object(Te.jsxs)("p",{className:"film-card__meta",children:[Object(Te.jsx)("span",{className:"film-card__genre",children:a.genre}),Object(Te.jsx)("span",{className:"film-card__year",children:a.released})]}),Object(Te.jsx)(We,{})]})]})})]})},Ie=a(10),De=a(9),ze=a.n(De);function Be(e,t){var a=e.videoSrc,r=e.posterSrc;return Object(Te.jsx)("video",{src:a,poster:r,ref:t,muted:!0,loop:!0,width:"280",height:"175","data-testid":"video-player"})}var Ge=Object(s.forwardRef)(Be),He=a(51),Ve=a.n(He);function Xe(e){var t=e.film,a=e.hasPlayer,r=Object(s.useRef)(null),c=Object(s.useRef)(null),n=function(e,t){var a=Object(s.useState)(!1),r=Object(Ie.a)(a,2),c=r[0],n=r[1];return Object(s.useEffect)((function(){if(null!==e.current)return c?t.current=setTimeout((function(){var t;return null===(t=e.current)||void 0===t?void 0:t.play()}),1e3):e.current.load(),function(){t.current&&clearTimeout(t.current)}}),[c,t,e]),[function(){n(!0)},function(){n(!1)}]}(r,c),i=Object(Ie.a)(n,2),o=i[0],l=i[1],d=ze()("small-film-card catalog__films-card",Ve.a.link);return Object(Te.jsx)(_e.a,{className:d,to:"/films/".concat(t.id),children:Object(Te.jsxs)("article",{onMouseEnter:o,onMouseLeave:l,children:[Object(Te.jsx)("div",{className:"small-film-card__image",children:a?Object(Te.jsx)(Ge,{videoSrc:t.videoLink,posterSrc:t.previewImage,ref:r}):Object(Te.jsx)("img",{src:t.previewImage,alt:t.name})}),Object(Te.jsx)("h3",{className:"small-film-card__title small-film-card__link",children:t.name})]})})}var Ke=Object(s.memo)(Xe);var Ye=function(e){var t=e.films,a=e.hasPlayer;return Object(Te.jsx)("div",{className:"catalog__films-list",children:t.map((function(e){return Object(Te.jsx)(Ke,{film:e,hasPlayer:a},e.id)}))})};var Je=function(e){var t=e.className,a=e.onMain,c=function(){return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("span",{className:"logo__letter logo__letter--1",children:"W"}),Object(Te.jsx)("span",{className:"logo__letter logo__letter--2",children:"T"}),Object(Te.jsx)("span",{className:"logo__letter logo__letter--3",children:"W"})]})};return Object(Te.jsx)("div",{className:"logo",children:a?Object(Te.jsx)("span",{className:"logo__link ".concat(t),children:c()}):Object(Te.jsx)(_e.a,{to:r.Root,className:"logo__link ".concat(t),children:c()})})};function Ze(e){var t=e.onMain,a=void 0!==t&&t;return Object(Te.jsxs)("footer",{className:"page-footer",children:[Object(Te.jsx)(Je,{onMain:a,className:"logo__link--light"}),Object(Te.jsx)("div",{className:"copyright",children:Object(Te.jsx)("p",{children:"\xa9 2019 What to watch Ltd."})})]})}var Qe=Object(s.memo)(Ze),$e=function(e){return e[R.App].activeGenre};var et=function(e){var t=e.genres,a=Object(u.c)($e),r=Object(u.b)(),c=function(e){return ze()({"catalog__genres-item":!0,"catalog__genres-item--active":e===a})};return Object(Te.jsx)("ul",{className:"catalog__genres-list",children:t.map((function(e){return Object(Te.jsx)("li",{className:c(e),"data-testid":e===a?"activeGenre":"genre",children:Object(Te.jsx)("a",{href:"/",className:"catalog__genres-link",onClick:function(t){return function(e,t){e.preventDefault(),r(k(t)),r(K())}(t,e)},children:e})},e)}))})},tt=a(59),at=["token"];var rt=function(){var e=Object(u.c)(Me),t=Object(u.c)(Ee),a=Object(u.b)();return e===c.Auth?Object(Te.jsxs)("ul",{className:"user-block",children:[Object(Te.jsx)("li",{className:"user-block__item",children:Object(Te.jsx)("div",{className:"user-block__avatar",children:Object(Te.jsx)(_e.a,{to:r.MyList,children:Object(Te.jsx)("img",{src:t.avatarUrl,alt:"".concat(t.name," avatar"),width:"63",height:"63"})})})}),Object(Te.jsx)("li",{className:"user-block__item",children:Object(Te.jsx)(_e.a,{to:r.Root,onClick:function(e){e.preventDefault(),a(function(){var e=Object(we.a)(Ne.a.mark((function e(t,a,r){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.delete(n.Logout);case 3:localStorage.removeItem(N),t(Q()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Se.b.error(p);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,r){return e.apply(this,arguments)}}())},className:"user-block__link",children:"Sign out"})})]}):Object(Te.jsx)("div",{className:"user-block",children:Object(Te.jsx)(_e.a,{to:r.Login,className:"user-block__link",children:"Sign in"})})};function ct(e){var t=e.className,a=void 0===t?"":t,r=e.children,c=e.isVisibleUserMenu,n=void 0===c||c,i=e.onMain,s=void 0!==i&&i,o=ze()("page-header","".concat(a));return Object(Te.jsxs)("header",{className:o,children:[Object(Te.jsx)(Je,{onMain:s}),r,n&&Object(Te.jsx)(rt,{})]})}var nt=Object(s.memo)(ct);var it=function(){var e=Object(u.b)();return Object(Te.jsx)("div",{className:"catalog__more",children:Object(Te.jsx)("button",{className:"catalog__button",type:"button",onClick:function(){e(X(8))},children:"Show more"})})},st=a(20),ot=a.n(st),lt=a(52),dt=a.n(lt);var ut=function(){return Object(Te.jsx)("div",{className:dt.a.wrap,"data-testid":"loading",children:Object(Te.jsx)(ot.a,{type:"Oval",color:"#eee5b5",height:60,width:60})})},jt=a(22),mt=a.n(jt);var bt=function(e){var t=e.type,a=void 0===t?"":t,c=ze()("user-page__head",mt.a.header);return Object(Te.jsxs)("div",{className:"user-page","data-testid":"error-page",children:[Object(Te.jsx)(nt,{className:c,isVisibleUserMenu:!1}),Object(Te.jsx)("div",{className:mt.a["main-layout"],children:"404"===a?Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("p",{className:mt.a.text,children:"404 Not Found"}),Object(Te.jsx)(_e.a,{to:r.Root,className:mt.a.link,children:"Go back to the main page"})]}):Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("p",{className:mt.a.text,children:"Oops... Something went wrong. Try again"}),Object(Te.jsx)(_e.a,{to:r.Root,className:mt.a.link,onClick:function(e){e.preventDefault(),window.location.reload()},children:"Reload page"})]})}),Object(Te.jsx)(Qe,{})]})},Ot=a(58),ht=a(31),ft=function(e){return e[R.Films].films},vt=function(e){return e[R.Films].isFilmsLoading},xt=function(e){return e[R.Films].isFilmsError},pt=Object(ht.a)(ft,(function(e){var t=[O].concat(Object(Ot.a)(new Set(e.map((function(e){return e.genre})))));return t.length>10&&(t.length=10),t})),_t=Object(ht.a)([$e,ft],(function(e,t){return e===O?t:t.filter((function(t){return t.genre===e}))})),gt=Object(ht.a)([_t,function(e){return e[R.App].limit}],(function(e,t){return e.slice(0,t)})),Nt=Object(ht.a)([ft,function(e,t){return t}],(function(e,t){return e.find((function(e){return e.id===+t}))}));var wt=function(){var e=Object(u.c)(pt),t=Object(u.c)(_t),a=Object(u.c)(gt),r=Object(u.c)(vt),c=Object(u.c)(ve),i=Object(u.c)(xt),o=Object(u.c)(Me),l=Object(u.b)(),d=t.length>8&&t.length!==a.length;return Object(s.useEffect)((function(){l(function(){var e=Object(we.a)(Ne.a.mark((function e(t,a,r){var c,i,s;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(q(!0)),e.prev=1,e.next=4,r.get("".concat(n.Promo));case 4:c=e.sent,i=c.data,s=Le()(i),t(W(s)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(U(!0)),Se.b.error("Failed to upload promo movie. Try another time");case 14:return e.prev=14,t(q(!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})));return function(t,a,r){return e.apply(this,arguments)}}())}),[l,o]),Object(s.useEffect)((function(){l(K())}),[l]),r&&c?Object(Te.jsx)(ut,{}):i?Object(Te.jsx)(bt,{}):Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(Ue,{children:Object(Te.jsx)(nt,{className:"film-card__head",onMain:!0})}),Object(Te.jsxs)("div",{className:"page-content",children:[Object(Te.jsxs)("section",{className:"catalog",children:[Object(Te.jsx)("h2",{className:"catalog__title visually-hidden",children:"Catalog"}),Object(Te.jsx)(et,{genres:e}),Object(Te.jsx)(Ye,{films:a,hasPlayer:!0}),d&&Object(Te.jsx)(it,{})]}),Object(Te.jsx)(Qe,{onMain:!0})]})]})};var yt=function(){var e=Object(pe.h)().pathname;return Object(s.useEffect)((function(){window.scrollTo(0,0)}),[e]),null},Lt=a(53),St=a.n(Lt),Ft={email:"Email address",password:"Password"};var Rt=function(){var e=Object(u.c)(Ae),t=Object(u.b)(),a=Object(s.useState)({email:{value:"",error:!1,regex:/\S+@\S+\.\S+/,errorText:"Please enter a valid email address"},password:{value:"",error:!1,regex:/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/,errorText:"Please enter a valid password (at least one large, one small letter and a number)"}}),i=Object(Ie.a)(a,2),o=i[0],l=i[1],d=Object.keys(Ft),j=d.find((function(e){return o[e].error})),m=d.some((function(e){return o[e].error})),b=d.some((function(e){return""===o[e].value})),O=m||b||e,h=ze()("sign-in__btn",Object(L.a)({},St.a.btnDisabled,O)),f=function(e){var t=e.target,a=t.name,r=t.value,c=o[a].regex.test(r);l(Object(je.a)(Object(je.a)({},o),{},Object(L.a)({},a,Object(je.a)(Object(je.a)({},o[a]),{},{error:!c,value:r}))))};return Object(Te.jsx)("div",{className:"sign-in user-page__content",children:Object(Te.jsxs)("form",{action:"#",className:"sign-in__form",onSubmit:function(e){e.preventDefault(),O||t(function(e){var t=e.login,a=e.password;return function(){var e=Object(we.a)(Ne.a.mark((function e(i,s,o){var l,d,u,j,m;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(J(!0)),e.prev=1,e.next=4,o.post(n.Login,{email:t,password:a});case 4:l=e.sent,d=l.data,u=d.token,j=Object(tt.a)(d,at),m=Le()(j),w(u),i(ee(m)),i(Y(c.Auth)),i($(r.Root)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),Se.b.error(p);case 18:return e.prev=18,i(J(!1)),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(t,a,r){return e.apply(this,arguments)}}()}({login:o.email.value,password:o.password.value}))},noValidate:!0,children:[j&&Object(Te.jsx)("div",{className:"sign-in__message","data-testid":"error",children:Object(Te.jsx)("p",{children:o[j].errorText})}),Object(Te.jsx)("div",{className:"sign-in__fields",children:Object.entries(Ft).map((function(e){var t=Object(Ie.a)(e,2),a=t[0],r=t[1],c=ze()("sign-in__field",{"sign-in__field--error":o[a].error});return Object(Te.jsxs)("div",{className:c,children:[Object(Te.jsx)("input",{className:"sign-in__input",type:a,placeholder:r,name:a,id:a,value:o[a].value,onChange:f}),Object(Te.jsx)("label",{className:"sign-in__label visually-hidden",htmlFor:a,children:r})]},a)}))}),Object(Te.jsx)("div",{className:"sign-in__submit",children:Object(Te.jsx)("button",{className:h,type:"submit",disabled:O,children:e?Object(Te.jsx)(ot.a,{type:"Oval",color:"#eee5b5",height:30,width:30,"data-testid":"loader"}):"Sign in"})})]})})};var kt=function(){return Object(u.c)(Me)===c.Auth?Object(Te.jsx)(pe.a,{to:r.Root}):Object(Te.jsxs)("div",{className:"user-page",children:[Object(Te.jsx)(nt,{className:"user-page__head",isVisibleUserMenu:!1,children:Object(Te.jsx)("h1",{className:"page-title user-page__title",children:"Sign in"})}),Object(Te.jsx)(Rt,{}),Object(Te.jsx)(Qe,{})]})},Ct=function(e){return e[R.Favorites].myList},Et=function(e){return e[R.Favorites].isMyListLoading},Mt=function(e){return e[R.Favorites].isMyListError},At=a(38),Pt=a.n(At);var Tt=function(){var e=Object(u.c)(Ct),t=Object(u.c)(Et),a=Object(u.c)(Mt),r=Object(u.b)();Object(s.useEffect)((function(){r(function(){var e=Object(we.a)(Ne.a.mark((function e(t,a,r){var c,i,s;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ae(!0)),e.prev=1,e.next=4,r.get("".concat(n.Favorite));case 4:c=e.sent,i=c.data,s=Le()(i),t(re(s)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(ce(!0));case 13:return e.prev=13,t(ae(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t,a,r){return e.apply(this,arguments)}}())}),[r]);var c=ze()("page-title user-page__title",Pt.a.title);return t?Object(Te.jsx)(ut,{}):a?Object(Te.jsx)(bt,{}):Object(Te.jsxs)("div",{className:"user-page",children:[Object(Te.jsx)(nt,{className:"user-page__head",isAuthorizedUser:!0,children:Object(Te.jsx)("h1",{className:c,children:"My list"})}),Object(Te.jsxs)("section",{className:"catalog",children:[Object(Te.jsx)("h2",{className:"catalog__title visually-hidden",children:"Catalog"}),e.length?Object(Te.jsx)(Ye,{films:e,hasPlayer:!0}):Object(Te.jsx)("p",{className:Pt.a.noContentWrap,children:"You have not added any movies yet"})]}),Object(Te.jsx)(Qe,{})]})},qt=function(e){var t=Math.trunc(e/60),a=e%60;return"".concat(t,"h ").concat(a,"m")},Wt=function(e){var t=Math.floor(e/3600),a=e%3600,r=Math.floor(a/60),c=a%60,n="".concat(t).padStart(2,"0"),i="".concat(r).padStart(2,"0"),s="".concat(c).padStart(2,"0");return 0===t?"".concat(i," : ").concat(s):"".concat(n," : ").concat(i," : ").concat(s)};var Ut=function(e){var t,a,r=e.currentFilm;return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"film-rating",children:[Object(Te.jsx)("div",{className:"film-rating__score",children:r.rating}),Object(Te.jsxs)("p",{className:"film-rating__meta",children:[Object(Te.jsx)("span",{className:"film-rating__level",children:(a=r.rating,a>0&&a<3?"Bad":a>=3&&a<5?"Normal":a>=5&&a<8||a>=8&&a<10?"Good":10===a?"Awesome":"Incorrect")}),Object(Te.jsxs)("span",{className:"film-rating__count",children:[r.scoresCount," ratings"]})]})]}),Object(Te.jsxs)("div",{className:"film-card__text",children:[Object(Te.jsx)("p",{children:r.description}),Object(Te.jsx)("p",{className:"film-card__director",children:Object(Te.jsxs)("strong",{children:["Director: ",r.director]})}),Object(Te.jsx)("p",{className:"film-card__starring",children:Object(Te.jsxs)("strong",{children:["Starring: ",null===(t=r.starring)||void 0===t?void 0:t.join(", ")]})})]})]})};var It=function(e){var t=e.currentFilm;return Object(Te.jsxs)("div",{className:"film-card__text film-card__row",children:[Object(Te.jsxs)("div",{className:"film-card__text-col",children:[Object(Te.jsxs)("p",{className:"film-card__details-item",children:[Object(Te.jsx)("strong",{className:"film-card__details-name",children:"Director"}),Object(Te.jsx)("span",{className:"film-card__details-value",children:t.director})]}),Object(Te.jsxs)("p",{className:"film-card__details-item",children:[Object(Te.jsx)("strong",{className:"film-card__details-name",children:"Starring"}),Object(Te.jsx)("span",{className:"film-card__details-value",children:t.starring.map((function(e,t,a){return t===a.length-1?Object(Te.jsx)(s.Fragment,{children:e},e):Object(Te.jsxs)(s.Fragment,{children:[e,", ",Object(Te.jsx)("br",{})]},e)}))})]})]}),Object(Te.jsxs)("div",{className:"film-card__text-col",children:[Object(Te.jsxs)("p",{className:"film-card__details-item",children:[Object(Te.jsx)("strong",{className:"film-card__details-name",children:"Run Time"}),Object(Te.jsx)("span",{className:"film-card__details-value",children:qt(t.runTime)})]}),Object(Te.jsxs)("p",{className:"film-card__details-item",children:[Object(Te.jsx)("strong",{className:"film-card__details-name",children:"Genre"}),Object(Te.jsx)("span",{className:"film-card__details-value",children:t.genre})]}),Object(Te.jsxs)("p",{className:"film-card__details-item",children:[Object(Te.jsx)("strong",{className:"film-card__details-name",children:"Released"}),Object(Te.jsx)("span",{className:"film-card__details-value",children:t.released})]})]})]})},Dt=a(54),zt=a.n(Dt);var Bt=function(e){var t,a=e.review;return Object(Te.jsxs)("div",{className:"review","data-testid":"review",children:[Object(Te.jsxs)("blockquote",{className:"review__quote",children:[Object(Te.jsx)("p",{className:"review__text",children:a.comment}),Object(Te.jsxs)("footer",{className:"review__details",children:[Object(Te.jsx)("cite",{className:"review__author",children:a.user.name}),Object(Te.jsx)("time",{className:"review__date",dateTime:a.date,children:(t=a.date,new Date(t).toLocaleString("en",{year:"numeric",month:"long",day:"numeric"}))})]})]}),Object(Te.jsx)("div",{className:"review__rating",children:a.rating})]})},Gt=a(26),Ht=a.n(Gt),Vt=function(e){return e[R.Reviews].reviews},Xt=function(e){return e[R.Reviews].isReviewsLoading},Kt=function(e){return e[R.Reviews].isReviewsError},Yt=function(e){return e[R.Reviews].isSendReviewLoading};var Jt=function(){var e=Object(u.c)(Vt),t=Object(u.c)(Xt),a=Object(u.c)(Kt),r=Object(u.b)(),c=Object(pe.i)().id,i=Math.round(e.length/2)-1;return Object(s.useEffect)((function(){c&&r(function(e){return function(){var t=Object(we.a)(Ne.a.mark((function t(a,r,c){var i,s,o;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(B(!0)),t.prev=1,t.next=4,c.get("".concat(n.Reviews,"/").concat(e));case 4:i=t.sent,s=i.data,o=Le()(s),a(G(o)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a(H(!0));case 13:return t.prev=13,a(B(!1)),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(c))}),[c,r]),t?Object(Te.jsx)("div",{className:Ht.a.reviewsWrap,"data-testid":"loader",children:Object(Te.jsx)(ot.a,{type:"Oval",color:"#180202",height:40,width:40})}):a?Object(Te.jsx)("div",{className:Ht.a.reviewsWrap,children:Object(Te.jsx)("p",{className:Ht.a.reviewsText,children:x})}):e.length?Object(Te.jsxs)("div",{className:"film-card__reviews film-card__row",children:[Object(Te.jsx)("div",{className:"film-card__reviews-col",children:e.map((function(e,t){return t<=i&&Object(Te.jsx)(Bt,{review:e},e.id)}))}),Object(Te.jsx)("div",{className:"film-card__reviews-col",children:e.map((function(e,t){return t>i&&Object(Te.jsx)(Bt,{review:e},e.id)}))})]}):Object(Te.jsx)("div",{className:Ht.a.reviewsWrap,children:Object(Te.jsx)("p",{className:Ht.a.reviewsText,children:"So far, no one has left a review"})})};var Zt=function(e){var t=e.currentFilm,a=["Overview","Details","Reviews"],r=Object(s.useState)(a[0]),c=Object(Ie.a)(r,2),n=c[0],i=c[1],o=function(e){return ze()("film-nav__item",{"film-nav__item--active":e===n})},l=ze()("film-nav__link",zt.a.resetButton);return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("nav",{className:"film-nav film-card__nav",children:Object(Te.jsx)("ul",{className:"film-nav__list",children:a.map((function(e){return Object(Te.jsx)("li",{className:o(e),children:Object(Te.jsx)("button",{className:l,type:"button",onClick:function(){return i(e)},children:e})},e)}))})}),n===a[0]&&Object(Te.jsx)(Ut,{currentFilm:t}),n===a[1]&&Object(Te.jsx)(It,{currentFilm:t}),n===a[2]&&Object(Te.jsx)(Jt,{})]})},Qt=a(33),$t=a.n(Qt),ea=function(e){return e[R.SimilarFilms].similar},ta=function(e){return e[R.SimilarFilms].isSimilarLoading},aa=function(e){return e[R.SimilarFilms].isSimilarError};var ra=function(){var e=Object(u.c)(Re),t=Object(u.c)(ke),a=Object(u.c)(Ce),r=Object(u.c)(ea),c=Object(u.c)(ta),i=Object(u.c)(aa),o=Object(u.b)(),l=Object(pe.i)().id;return Object(s.useEffect)((function(){l&&(o(function(e){return function(){var t=Object(we.a)(Ne.a.mark((function t(a,r,c){var i,s,o;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(A(!0)),t.prev=1,r().FILM.filmError&&a(T("")),t.next=5,c.get("".concat(n.Films,"/").concat(e));case 5:i=t.sent,s=i.data,o=Le()(s),a(P(o)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),t.t0===f?a(T(f.toString())):a(T(v));case 14:return t.prev=14,a(A(!1)),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(l)),o(function(e){return function(){var t=Object(we.a)(Ne.a.mark((function t(a,r,c){var i,s,o;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(I(!0)),t.prev=1,r().SIMILAR_FILMS.isSimilarError&&a(z(!1)),t.next=5,c.get("".concat(n.Films,"/").concat(e,"/similar"));case 5:i=t.sent,s=i.data,o=Le()(s),a(D(o)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a(z(!0));case 14:return t.prev=14,a(I(!1)),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(l)))}),[o,l]),t?Object(Te.jsx)(ut,{}):a===f.toString()?Object(Te.jsx)(bt,{type:"404"}):a===v?Object(Te.jsx)(bt,{}):Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("section",{className:"film-card film-card--full",children:[Object(Te.jsxs)("div",{className:"film-card__hero",children:[Object(Te.jsx)("div",{className:"film-card__bg",children:Object(Te.jsx)("img",{src:"img/bg-the-grand-budapest-hotel.jpg",alt:"The Grand Budapest Hotel"})}),Object(Te.jsx)("h1",{className:"visually-hidden",children:"WTW"}),Object(Te.jsx)(nt,{className:"film-card__head",isAuthorizedUser:!0}),Object(Te.jsx)("div",{className:"film-card__wrap",children:Object(Te.jsxs)("div",{className:"film-card__desc",children:[Object(Te.jsx)("h2",{className:"film-card__title",children:e.name}),Object(Te.jsxs)("p",{className:"film-card__meta",children:[Object(Te.jsx)("span",{className:"film-card__genre",children:e.genre}),Object(Te.jsx)("span",{className:"film-card__year",children:e.rating})]}),Object(Te.jsx)(We,{hasReviewControl:!0})]})})]}),Object(Te.jsx)("div",{className:"film-card__wrap film-card__translate-top",children:Object(Te.jsxs)("div",{className:"film-card__info",children:[Object(Te.jsx)("div",{className:"film-card__poster film-card__poster--big",children:Object(Te.jsx)("img",{src:e.posterImage,alt:e.name,width:"218",height:"327"})}),Object(Te.jsx)("div",{className:"film-card__desc",children:Object(Te.jsx)(Zt,{currentFilm:e})})]})})]}),Object(Te.jsxs)("div",{className:"page-content",children:[Object(Te.jsxs)("section",{className:"catalog catalog--like-this",children:[Object(Te.jsx)("h2",{className:"catalog__title",children:"More like this"}),c?Object(Te.jsx)("div",{className:$t.a.similarWrap,children:Object(Te.jsx)(ot.a,{type:"Oval",color:"#eee5b5",height:50,width:50})}):i?Object(Te.jsx)("div",{className:$t.a.similarWrap,children:Object(Te.jsx)("p",{className:$t.a.similarText,children:x})}):Object(Te.jsx)(Ye,{films:r.slice(0,4),hasPlayer:!1})]}),Object(Te.jsx)(Qe,{})]})]})};var ca=function(e){var t=e.filmName,a=e.id;return Object(Te.jsx)("nav",{className:"breadcrumbs",children:Object(Te.jsxs)("ul",{className:"breadcrumbs__list",children:[Object(Te.jsx)("li",{className:"breadcrumbs__item",children:Object(Te.jsx)(_e.a,{to:"/films/".concat(a),className:"breadcrumbs__link",children:t})}),Object(Te.jsx)("li",{className:"breadcrumbs__item",children:Object(Te.jsx)("a",{className:"breadcrumbs__link",children:"Add review"})})]})})};function na(e){var t=e.rating,a=e.checked,r=e.onChange;return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("input",{className:"rating__input",id:"star-".concat(t),type:"radio",name:"rating",value:t,checked:t===a,onChange:function(e){var t=+e.target.value;r(t)},"data-testid":"star-".concat(t)}),Object(Te.jsxs)("label",{className:"rating__label",htmlFor:"star-".concat(t),children:["Rating ",t]})]})}var ia=Object(s.memo)(na),sa=a(55),oa=a.n(sa),la=Array.from({length:10},(function(e,t){return t+1})).reverse();var da=function(){var e=Object(u.c)(Yt),t=Object(u.b)(),a=Object(pe.i)().id,r=Object(s.useState)(""),c=Object(Ie.a)(r,2),i=c[0],o=c[1],l=Object(s.useState)(null),d=Object(Ie.a)(l,2),j=d[0],m=d[1],b=""===i||i.length<50||i.length>400||!j||e,O=Object(s.useCallback)((function(e){return m(e)}),[]),h=ze()("add-review",oa.a.wrap);return e?Object(Te.jsx)("div",{className:h,"data-testid":"loader",children:Object(Te.jsx)(ot.a,{type:"Oval",color:"#180202",height:50,width:50})}):Object(Te.jsx)("div",{className:"add-review",children:Object(Te.jsxs)("form",{action:"#",className:"add-review__form",onSubmit:function(e){e.preventDefault(),b||t(function(e,t){return function(){var a=Object(we.a)(Ne.a.mark((function a(r,c,i){return Ne.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(V(!0)),a.prev=1,a.next=4,i.post("".concat(n.Reviews,"/").concat(t),e);case 4:r($("/films/".concat(t))),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),Se.b.error(p);case 10:return a.prev=10,r(V(!1)),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[1,7,10,13]])})));return function(e,t,r){return a.apply(this,arguments)}}()}({rating:j,comment:i},a))},children:[Object(Te.jsx)("div",{className:"rating",children:Object(Te.jsx)("div",{className:"rating__stars",children:la.map((function(e){return Object(Te.jsx)(ia,{rating:e,checked:j,onChange:O},e)}))})}),Object(Te.jsxs)("div",{className:"add-review__text",children:[Object(Te.jsx)("textarea",{className:"add-review__textarea",name:"review-text",id:"review-text",placeholder:"Review text",onChange:function(e){var t=e.target;o(t.value)},value:i}),Object(Te.jsx)("div",{className:"add-review__submit",children:Object(Te.jsx)("button",{className:"add-review__btn",type:"submit",disabled:b,children:"Post"})})]})]})})};var ua=function(){var e=Object(u.c)(Re);return 0!==Object.keys(e).length?Object(Te.jsxs)("section",{className:"film-card film-card--full",children:[Object(Te.jsxs)("div",{className:"film-card__header",children:[Object(Te.jsx)("div",{className:"film-card__bg",children:Object(Te.jsx)("img",{src:e.backgroundImage,alt:e.name})}),Object(Te.jsx)("h1",{className:"visually-hidden",children:"WTW"}),Object(Te.jsx)(nt,{isAuthorizedUser:!0,children:Object(Te.jsx)(ca,{filmName:e.name,id:e.id})}),Object(Te.jsx)("div",{className:"film-card__poster film-card__poster--small",children:Object(Te.jsx)("img",{src:e.posterImage,alt:"".concat(e.name," poster"),width:"218",height:"327"})})]}),Object(Te.jsx)(da,{})]}):Object(Te.jsx)(bt,{})},ja=a(39),ma=a.n(ja),ba=a(56),Oa=a.n(ba);function ha(e){var t=e.progress,a=e.time,r=e.onChangeProgress,c=e.onChangeTime,n=e.video,i=e.isLoadedMetaData,o=Object(s.useRef)(null),l=Object(s.useRef)(null),d=ze()("player__progress",Oa.a.progress);return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"player__time",ref:l,children:[Object(Te.jsx)("progress",{className:d,value:t,max:"100",onClick:function(e){var t=e.currentTarget,a=t.getBoundingClientRect().left,i=t.offsetWidth,s=Math.round((e.clientX-a)*h/i);r(s),function(e){if(n){var t=n.duration*e/h,a=Math.round(n.duration-t),r=Wt(a);c(r),n.currentTime=t}}(s)}}),Object(Te.jsx)("div",{className:"player__toggler",style:{left:"".concat(t,"%")},onMouseDown:function(e){e.preventDefault();var t=e.currentTarget.getBoundingClientRect().left,a=e.clientX-t,i=function(e){if(a&&l.current&&o.current){var t=l.current.getBoundingClientRect().left,i=e.clientX-a-t;i<0&&(i=0);var s=l.current.offsetWidth;i>s&&(i=s);var d=i*h/l.current.offsetWidth;if(o.current.style.left="".concat(d,"%"),r(i*h/l.current.offsetWidth),n){var u=n.duration*d/h;n.currentTime=u,c(Wt(Math.round(n.duration-u)))}}};document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",i)}))},ref:o,"data-testid":"video-toggle",children:"Toggle"})]}),Object(Te.jsx)("div",{className:"player__time-value","data-testid":"video-time",children:i?a:"00:00"})]})}var fa=Object(s.memo)(ha);var va=function(e){var t=e.width,a=e.height,r=e.color,c=e.className,n=void 0===c?"":c,i=e.onClick;return Object(Te.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:a,viewBox:"0 0 1024 1024",color:r,className:n,onClick:i,"data-testid":"reload",children:Object(Te.jsx)("path",{d:"m909.1 209.3-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 0 0-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 0 1 655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 0 1 279 755.2a342.16 342.16 0 0 1-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 0 1 109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 0 0 3 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z",fill:"currentColor"})})};var xa=function(){var e=Object(pe.i)().id,t=Object(pe.g)(),a=Object(u.c)(ft),r=Object(u.c)((function(t){return Nt(t,e)})),c=Object(s.useRef)(null),n=Object(s.useState)(!1),i=Object(Ie.a)(n,2),o=i[0],l=i[1],d=Object(s.useState)(!0),j=Object(Ie.a)(d,2),m=j[0],b=j[1],O=Object(s.useState)(!1),f=Object(Ie.a)(O,2),v=f[0],x=f[1],p=Object(s.useState)(!1),_=Object(Ie.a)(p,2),g=_[0],N=_[1],w=Object(s.useState)(""),y=Object(Ie.a)(w,2),L=y[0],S=y[1],F=Object(s.useState)(0),R=Object(Ie.a)(F,2),k=R[0],C=R[1];Object(s.useEffect)((function(){c.current&&(o?c.current.play():c.current.pause())}),[o]);var E=function(){b(!1)},M=Object(s.useCallback)((function(e){C(e)}),[]),A=Object(s.useCallback)((function(e){S(e)}),[]),P=m&&o||m&&!o;return a.length?r?Object(Te.jsxs)("div",{className:"player",children:[Object(Te.jsxs)("div",{className:ma.a.loaderWrap,children:[Object(Te.jsx)(ot.a,{type:"Oval",color:"#d9cd8d",height:50,width:50,visible:P}),g&&k===h&&Object(Te.jsx)(va,{className:ma.a.reload,height:60,width:60,color:"#d9cd8d",onClick:function(){c.current&&(c.current.currentTime=0,S(Wt(Math.round(c.current.duration))),N(!1),l(!0))}})]}),Object(Te.jsx)("video",{src:r.videoLink,className:"player__video",poster:r.posterImage,ref:c,onWaiting:function(){b(!0)},onPlaying:E,onCanPlay:E,onTimeUpdate:function(){if(null!==c.current){var e=Wt(Math.round(c.current.duration-c.current.currentTime)),t=Math.round(c.current.currentTime/c.current.duration*h);S(e),C(t)}},onLoadedMetadata:function(){if(c.current){var e=Wt(Math.round(c.current.duration));S(e),x(!0)}},onLoadedData:function(){l(!0),b(!1)},onEnded:function(){l(!1),N(!0)},onPlay:function(){!1===o&&l(!0)},onPause:function(){!0===o&&l(!1)},"data-testid":"video-player"}),Object(Te.jsx)("button",{type:"button",className:"player__exit",onClick:function(e){e.preventDefault(),o&&l(!1),t.goBack()},children:"Exit"}),Object(Te.jsxs)("div",{className:"player__controls",children:[Object(Te.jsx)("div",{className:"player__controls-row",children:Object(Te.jsx)(fa,{progress:k,time:L,onChangeProgress:M,onChangeTime:A,video:c.current,isLoadedMetaData:v})}),Object(Te.jsxs)("div",{className:"player__controls-row",children:[Object(Te.jsx)("button",{type:"button",className:"player__play",onClick:function(e){e.preventDefault(),l(!0),o&&l(!1)},children:o?Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("svg",{viewBox:"0 0 14 21",width:"14",height:"21",children:Object(Te.jsx)("use",{xlinkHref:"#pause"})}),Object(Te.jsx)("span",{children:"Pause"})]}):Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("svg",{viewBox:"0 0 19 19",width:"19",height:"19",children:Object(Te.jsx)("use",{xlinkHref:"#play-s"})}),Object(Te.jsx)("span",{children:"Play"})]})}),Object(Te.jsx)("button",{type:"button",className:"player__play"}),Object(Te.jsx)("div",{className:"player__name",children:r.name}),Object(Te.jsxs)("button",{type:"button",className:"player__full-screen",onClick:function(e){e.preventDefault(),c.current&&c.current.requestFullscreen()},children:[Object(Te.jsx)("svg",{viewBox:"0 0 27 27",width:"27",height:"27",children:Object(Te.jsx)("use",{xlinkHref:"#full-screen"})}),Object(Te.jsx)("span",{children:"Full screen"})]})]})]})]}):Object(Te.jsx)(bt,{}):Object(Te.jsx)(ut,{})};var pa=function(e){var t=e.exact,a=e.path,n=e.render,i=Object(u.c)(Me);return Object(u.c)(Pe)?Object(Te.jsx)(ut,{}):Object(Te.jsx)(pe.b,{exact:t,path:a,render:function(){return i===c.Auth?n():Object(Te.jsx)(pe.a,{to:r.Login})}})};var _a=function(){return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)(yt,{}),Object(Te.jsxs)(pe.d,{children:[Object(Te.jsx)(pe.b,{path:"/",exact:!0,children:Object(Te.jsx)(wt,{})}),Object(Te.jsx)(pe.b,{path:r.Login,exact:!0,children:Object(Te.jsx)(kt,{})}),Object(Te.jsx)(pa,{exact:!0,path:r.MyList,render:function(){return Object(Te.jsx)(Tt,{})}}),Object(Te.jsx)(pe.b,{path:r.Film,exact:!0,children:Object(Te.jsx)(ra,{})}),Object(Te.jsx)(pa,{exact:!0,path:r.AddReview,render:function(){return Object(Te.jsx)(ua,{})}}),Object(Te.jsx)(pe.b,{path:r.Player,exact:!0,children:Object(Te.jsx)(xa,{})}),Object(Te.jsx)(pe.b,{children:Object(Te.jsx)(bt,{type:"404"})})]})]})},ga=a(57),Na=Object(ga.a)(),wa=function(e){return function(e){return function(t){return t.type===y.RedirectToRoute&&Na.push(t.payload),e(t)}}},ya=(a(118),a(119),function(e){var t=b.a.create({baseURL:"https://8.react.pages.academy/wtw",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){var a=t.response;return(null===a||void 0===a?void 0:a.status)===_.Unauthorized?(e(),Promise.reject(_.Unauthorized)):(null===a||void 0===a?void 0:a.status)===_.NotFound?Promise.reject(_.NotFound):Promise.reject(t)})),t.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(N);return null!==e&&void 0!==e?e:""}();return t&&(e.headers["x-token"]=t),e})),t}((function(){return La.dispatch(Y(c.NoAuth))}))),La=Object(j.a)({reducer:he,middleware:function(e){return e({thunk:{extraArgument:ya}}).concat(wa)}});La.dispatch(function(){var e=Object(we.a)(Ne.a.mark((function e(t,a,r){var i,s,o;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Z(!0)),e.prev=1,e.next=4,r.get(n.Login);case 4:i=e.sent,s=i.data,delete(o=Le()(s)).token,t(ee(o)),t(Y(c.Auth)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),Se.b.info("Hello friend! Don't forget log in to the system!",{position:"bottom-right",theme:"dark"});case 15:return e.prev=15,t(Z(!1)),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t,a,r){return e.apply(this,arguments)}}()),La.dispatch(function(){var e=Object(we.a)(Ne.a.mark((function e(t,a,r){var c,i,s;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(C(!0)),e.prev=1,e.next=4,r.get(n.Films);case 4:c=e.sent,i=c.data,s=i.map((function(e){return Le()(e)})),t(E(s)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(M());case 13:return e.prev=13,t(C(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t,a,r){return e.apply(this,arguments)}}()),d.a.render(Object(Te.jsx)(o.a.StrictMode,{children:Object(Te.jsx)(u.a,{store:La,children:Object(Te.jsxs)(pe.c,{history:Na,children:[Object(Te.jsx)(Se.a,{}),Object(Te.jsx)(_a,{})]})})}),document.getElementById("root"))},22:function(e,t,a){e.exports={header:"error-screen_header__1Vt7c","main-layout":"error-screen_main-layout__1RTBp",text:"error-screen_text__O46_X",link:"error-screen_link__1s1tm"}},26:function(e,t,a){e.exports={reviewsWrap:"reviews_reviewsWrap__3X5ag",reviewsText:"reviews_reviewsText__3y7lu"}},33:function(e,t,a){e.exports={similarWrap:"movie-screen_similarWrap__1Y8gK",similarText:"movie-screen_similarText__aV53o"}},38:function(e,t,a){e.exports={title:"my-list-screen_title__32eMp",noContentWrap:"my-list-screen_noContentWrap__1K2Ox"}},39:function(e,t,a){e.exports={loaderWrap:"player-screen_loaderWrap__3wmfz",reload:"player-screen_reload__n1zBI"}},51:function(e,t,a){e.exports={link:"card_link__2T0D4"}},52:function(e,t,a){e.exports={wrap:"loading-screen_wrap__1BiGu"}},53:function(e,t,a){e.exports={btnDisabled:"sign-in_btnDisabled__YpGK3"}},54:function(e,t,a){e.exports={resetButton:"tabs_resetButton__3ubv-"}},55:function(e,t,a){e.exports={wrap:"comment-form_wrap__-ilVe"}},56:function(e,t,a){e.exports={progress:"progress_progress__2YNAx"}}},[[120,1,2]]]);
//# sourceMappingURL=main.6607209d.chunk.js.map